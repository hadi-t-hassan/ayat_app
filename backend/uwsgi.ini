[uwsgi]
# Django-related settings
module = quran_events_backend.wsgi:application
pythonpath = /home/ayat_app/backend
chdir = /home/ayat_app/backend

# Process-related settings
master = true
processes = 4
threads = 2
max-requests = 5000
vacuum = true
die-on-term = true

# Socket settings
socket = /home/ayat_app/backend/ayat_app.sock
chmod-socket = 666
uid = www-data
gid = www-data

# Logging
logto = /var/log/uwsgi/ayat_app.log
log-maxsize = 50000000
log-backupcount = 5

# Environment variables
env = DJANGO_SETTINGS_MODULE=quran_events_backend.settings_production

# Buffer size
buffer-size = 32768

# Memory settings
limit-as = 512
reload-mercy = 10
worker-reload-mercy = 10

# Stats
stats = /tmp/uwsgi-stats.sock
stats-http = true

# Harakiri settings (timeout)
harakiri = 60
harakiri-verbose = true

# Lazy apps
lazy-apps = true

# Memory reporting
memory-report = true

# Disable logging for static files
disable-logging = true
